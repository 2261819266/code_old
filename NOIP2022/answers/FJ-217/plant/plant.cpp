#include <bits/stdc++.h>
using namespace std;
const int maxn=2e3+10;
//22-36pts??? 
int a[maxn][maxn],sum1[maxn][maxn],sum2[maxn][maxn];
char mapp[maxn][maxn];
bool query_row(int k,int l,int r)
{
	int cnt=sum1[k][r]-sum1[k][l-1];
	return !cnt;
}
bool query_col(int k,int l,int r)
{
	int cnt=sum2[k][r]-sum2[k][l-1];
	return !cnt;
}
void test()
{
	cout<<1<<'\n';
}
char read()
{
	char ch='a';
	while(!isdigit(ch))
	ch=getchar();
	return ch;
}
signed main()
{
	freopen("plant.in","r",stdin);
	freopen("plant.out","w",stdout);
	int T,id;
	cin>>T>>id;
	while(T--)
	{
	int n,m,c,f;
	cin>>n>>m>>c>>f;
	for(int i=1;i<=n;i++)
	for(int j=1;j<=m;j++)
	mapp[i][j]=read(),a[i][j]=mapp[i][j]-'0',sum1[i][j]=sum1[i][j-1]+a[i][j],sum2[j][i]=sum2[j][i-1]+a[i][j];
	if(c==0&&f==0)
	{
		cout<<0<<' '<<0<<'\n';
		continue;
	}
	int Vc=0,Vf=0;
	for(int x1=1;x1<=n;x1++)
	for(int x2=x1+2;x2<=n;x2++)
	for(int yy0=1;yy0<=m;yy0++)
	for(int yy1=yy0+1;yy1<=m;yy1++)
	for(int yy2=yy0+1;yy2<=m;yy2++)
	if(query_row(x1,yy0,yy1)&&query_row(x2,yy0,yy2)&&query_col(yy0,x1,x2))
	Vc++;
	for(int x1=1;x1<=n;x1++)
	for(int x2=x1+2;x2<=n;x2++)
	for(int x3=x2+1;x3<=n;x3++)
	for(int yy0=1;yy0<=m;yy0++)
	for(int yy1=yy0+1;yy1<=m;yy1++)
	for(int yy2=yy0+1;yy2<=m;yy2++)
	if(query_row(x1,yy0,yy1)&&query_row(x2,yy0,yy2)&&query_col(yy0,x1,x3))
	Vf++;
	cout<<Vc*c<<' '<<Vf*f<<'\n';
	}
}
/*
5 0
30 30 1 1
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
30 30 1 1
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
30 30 1 1
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
30 30 1 1
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
30 30 1 1
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
000000000000000000000000000000
*/
